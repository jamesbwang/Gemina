  We study the cascading failure of networks due to overload , using the betweenness centrality of a node as the measure of its load following the Motter and Lai model. We study the fraction of survived nodes at the end of the cascade p _ ( f) as a function of the strength of the initial attack , measured by the fraction of nodes p that survive the initial attack for different values of tolerance α in random regular and Erdös-Renyi graphs. We find the existence of a first-order phase-transition line p _ ( t) ( α) on a p-α plane , such that if p < p _ ( t) , the cascade of failures leads to a very small fraction of survived nodes p _ ( f) and the giant component of the network disappears , while for p > p _ ( t) , p _ ( f) is large and the giant component of the network is still present. Exactly at p _ ( t) , the function p _ ( f) ( p) undergoes a first-order discontinuity. We find that the line p _ ( t) ( α) ends at a critical point ( p _ ( c) , α _ ( c)) , in which the cascading failures are replaced by a second-order percolation transition. We find analytically the average betweenness of nodes with different degrees before and after the initial attack , we investigate their roles in the cascading failures , and we find a lower bound for p _ ( t) ( α). We also study the difference between localized and random attacks.