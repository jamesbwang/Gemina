  Detailed understanding of the current-induced fluorescence mechanism constitutes an exciting challenge as it can open the way to efficient coupling between an electric field and light at the nanoscale. At the same time , a number of published experimental studies give an unclear , contradictory picture of this phenomenon working principle. Here , for a system consisting of a silver tip and a porphyrin molecule , we perform for the first time fully atomistic , real-time nonadiabatic dynamics simulations to study the process of energy transfer and relaxation in an STM setup. We calculate time scales of all crucial processes and explain their atomic details. On this basis , we confirm and characterize the dual mechanism of the observed emission based on competing elastic and inelastic electron transfer between the metal tip and the molecule.