  There have been rapidly growing applications using machine learning models for predictive analytics in Electronic Health Records ( EHR) to improve the quality of hospital services and the efficiency of healthcare resource utilization. A fundamental and crucial step in developing such models is to convert medical codes in EHR to feature vectors. These medical codes are used to represent diagnoses or procedures. Their vector representations have a tremendous impact on the performance of machine learning models. Recently , some researchers have utilized representation learning methods from Natural Language Processing ( NLP) to learn vector representations of medical codes. However , most previous approaches are unsupervised , i.e. the generation of medical code vectors is independent from prediction tasks. Thus , the obtained feature vectors may be inappropriate for a specific prediction task. Moreover , unsupervised methods often require a lot of samples to obtain reliable results , but most practical problems have very limited patient samples. In this paper , we develop a new method called Prediction Task Guided Health Record Aggregation ( PTGHRA) , which aggregates health records guided by prediction tasks , to construct training corpus for various representation learning models. Compared with unsupervised approaches , representation learning models integrated with PTGHRA yield a significant improvement in predictive capability of generated medical code vectors , especially for limited training samples.