  Precise alignment of small-scale building blocks into specific structural features is important for the manufacture of novel materials. Directed self-assembly is a promising route to align such small-scale building blocks with single-particle resolution. However , reliable alignment via directed self-assembly is challenging due to design uncertainty , randomness and potential disturbances acting on the system. This paper presents an integrated feedback control strategy to align colloidal particles reliably using directed self-assembly with electric field properties as manipulated variables in a microfluidic device. First , the particle density is controlled to make assembly of a defect-free structure attainable. Subsequently , a novel control method for particle alignment is implemented to self-assemble lines with single-particle resolution. The system 's ergodicity is restricted systematically to assure that the density-control step at the higher hierarchy restricts the alignment-control step at the lower hierarchy. The method exploits several electrokinetic phenomena and all steps are fully automated. The approach is generic and can in principle be extended to include more density control steps to self-assemble more complicated structures.